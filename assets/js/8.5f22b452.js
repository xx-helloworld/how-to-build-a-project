(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{216:function(a,e,s){"use strict";s.r(e);var l=s(2),t=Object(l.a)({},function(){var a=this,e=a.$createElement,s=a._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"publish"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#publish","aria-hidden":"true"}},[a._v("#")]),a._v(" publish")]),a._v(" "),s("h2",{attrs:{id:"lerna-publish"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lerna-publish","aria-hidden":"true"}},[a._v("#")]),a._v(" lerna publish")]),a._v(" "),s("p",[a._v("给一个项目的更新创建新的release，采用询问的方式创建一个new version并更新所有packages到git和npm仓库；")]),a._v(" "),s("p",[a._v("主要可选项")]),a._v(" "),s("ul",[s("li",[a._v("--npm-tag [tagname] — publish到某个tag上，默认是latest")])]),a._v(" "),s("blockquote",[s("p",[a._v("如果是内侧版本可以使用tagname=next，安装内测版本就是npm i xx@next")])]),a._v(" "),s("ul",[s("li",[a._v("--canary/-c – 创建一个随机变量的release.")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("lerna publish --canary\n# 1.0.0 => 1.0.1-alpha.0+${SHA} of packages changed since the previous commit\n# a subsequent canary publish will yield 1.0.1-alpha.1+${SHA}, etc\n")])])]),s("ul",[s("li",[a._v("--skip-git – 不运行任何git命令.")]),a._v(" "),s("li",[a._v("--force-publish [packages] — 强制publish到一个特殊的tag或者版本号,如果使用*则提交所有的packages到某个版本号.")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("lerna publish 0.0.2-alpha.1 --force-publish=*\n# Changes:\n# - @xx-learning/house: 0.0.3-alpha.0 => 0.0.2-alpha.1\n# - @xx-learning/window: 0.0.1 => 0.0.2-alpha.1\n")])])]),s("blockquote",[s("p",[a._v("如果npm仓库里面没有@xx-learning的组织是无法发布@xx-learning/demo，必须要要去新建一个")])]),a._v(" "),s("p",[a._v("其他可选项在官网也有写，不过官网的文档不是特别的清楚")]),a._v(" "),s("h2",{attrs:{id:"lerna-publish-的一些指令说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lerna-publish-的一些指令说明","aria-hidden":"true"}},[a._v("#")]),a._v(" lerna publish 的一些指令说明")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("  Patch (0.0.3) #不说了\n  Minor (0.1.0) #不说了\n  Major (1.0.0) #不说了\n  Prepatch (0.0.4-alpha.0) #不说了\n  Preminor (0.1.0-alpha.0) #不说了\n  Premajor (1.0.0-alpha.0) #不说了\n  Custom Prerelease #如果用预发布就是发布了后面的小数点+1比如现在是0.0.3-alpha.1，预发布就是0.0.3-alpha.2\n  Custom Version #没试过，应该和上面一样但不发npm和git，和lerna version功能类似\n")])])])])},[],!1,null,null,null);e.default=t.exports}}]);